<div style="padding-top: 16px;">
    <div class="w3-center" style="max-width: 100%;width: 600px;margin-left: auto;margin-right: auto;">
        <img src="api/media/dp/default.jpg" style="height: 125px;width:125px;vertical-align: text-top;" class="dp w3-circle" alt="Profile Picture" />
        <button class="w3-button w3-hover-none" data-ripple="rgba(0,0,0,1)" onclick="$('#file').click();" style="position: absolute;"><span class="fas fa-upload"></span></button>
    </div>
    <input type="file" style="display: none" id="file" onchange="changeDp();" />
    <div class="w3-center w3-padding-small" style="max-width: 100%;width: 600px;margin: auto;">
        <a style="display: inline-block;text-decoration: none;" class="background w3-padding-small w3-card-2 w3-margin border-bottom full_name" id="profile_full_name"></a>
    </div>
    <div style="text-align: right;">
        <button class="w3-button w3-black w3-hover-black w3-margin-right" data-ripple='rgba(255,255,255,1)' onclick="loadTmpPage('edit_profile')">Edit profile</button>
    </div>
</div>

<div class="w3-margin-top background border-bottom" style="margin: 8px;display: none;" id="post_prototype">
    <div class="post-header w3-cell-row w3-border-bottom">
        <div class="w3-cell w3-cell-middle w3-padding-small" style="text-align: left;"><img src="" style="height: 35px;width: 35px;vertical-align: middle;margin: 0px;" alt="profile picture" class="w3-circle post_image" />&nbsp;&nbsp;<a href="" class="link post_link"></a></div>
        <div class="w3-cell w3-cell-middle" style="text-align: right;"><span class="w3-text-gray post_time"></span><button class="w3-button w3-transparent w3-hover-none post_delete" data-ripple="rgba(0,0,0,1)"><span class="fa fa-trash"></span></button></div>
    </div>
    <div class="post-content w3-padding w3-border-bottom" style="word-wrap: break-word"></div>
    <div class="w3-row">
        <div class="w3-padding w3-col s6 w3-border-right post_like" data-ripple="rgba(0,0,0,1)" style="text-align:center;cursor:pointer"><span class="fas fa-thumbs-up"></span> Like</div>
        <div class="w3-padding w3-col s6 post_comments" data-ripple="rgba(0,0,0,1)" style="text-align:center;cursor:pointer"><span class="fas fa-comments"></span> Comment</div>
    </div>
</div>

<script>
    updateProfile();
    $("#profile_full_name").attr("href", "#user/"+userinfo['username']);
    function changeDp() {
        loadPage('loader');
        var fd = new FormData();
        fd.append('file', document.getElementById('file').files[0]);
        $.ajax({
            url: base_url + '/profile/uploaddp.php',
            type: 'POST',
            data: fd,
            success: function(data){
                if (data.success) {
                    loadTmpPage('change_profile_picture');
                } else if(data.logout) {
                    loadPage('logout');
                } else if (data.error) {
                    toast(data.error, 2000);
                    loadPage('profile');
                } else {
                    toast('Unknown error occured');
                    loadPage('profile');
                }
            },
            fail: function() {
                toast('Unknown error occured');
                loadPage('profile');
            },
            cache: false,
            contentType: false,
            processData: false
        });
    }
    updateDP();
</script>