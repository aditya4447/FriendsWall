<div class="" style="padding-top: 16px;">
    <div class="w3-center" style="max-width: 100%;width: 600px;margin-left: auto;margin-right: auto;">
        <img src="api/media/dp/default.jpg" style="height: 125px;width:125px;vertical-align: text-top;" class="dp w3-circle" alt="Profile Picture" />
        <button class="w3-button w3-hover-none" data-ripple="rgba(0,0,0,1)" onclick="$('#file').click();" style="position: absolute;"><span class="fas fa-upload"></span></button>
    </div>
    <input type="file" style="display: none" id="file" onchange="changeDp();" />
    <div class="w3-center w3-padding-small" style="max-width: 100%;width: 600px;margin: auto;">
        <a style="display: inline-block;text-decoration: none;" class="background w3-padding-small w3-card-2 w3-margin border-bottom full_name" id="profile_full_name"></a>
    </div>
    <button class="w3-button w3-right w3-black w3-hover-black w3-margin-right" data-ripple='rgba(255,255,255,1)' onclick="loadTmpPage('edit_profile')">Edit profile</button>
</div>
<script>
    updateProfile();
    $("#profile_full_name").attr("href", "#user/"+userinfo['username']);
    function changeDp() {
        loadPage('loader');
        var fd = new FormData();
        fd.append('file', document.getElementById('file').files[0]);
        $.ajax({
            url: base_url + '/profile/uploaddp.php',
            type: 'POST',
            data: fd,
            success: function(data){
                if (data.success) {
                    loadTmpPage('change_profile_picture');
                } else if(data.logout) {
                    loadPage('logout');
                } else if (data.error) {
                    toast(data.error, 2000);
                    loadPage('profile');
                } else {
                    toast('Unknown error occured');
                    loadPage('profile');
                }
            },
            fail: function() {
                toast('Unknown error occured');
                loadPage('profile');
            },
            cache: false,
            contentType: false,
            processData: false
        });
    }
    updateDP();
</script>